
#^ –ó–∞–¥–∞—á–∞ 3: –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ üìö
# –£—Å–ª–æ–≤–∏–µ:
# –°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–∏ –∫–ª–∞—Å—Å–∞: Book, Reader, –∏ Library

#~ –ö–ª–∞—Å—Å Book:
# –ê—Ç—Ä–∏–±—É—Ç—ã: title, author, isbn, is_borrowed (–≤–∑—è—Ç–∞ –ª–∏ –∫–Ω–∏–≥–∞), borrower (–∫—Ç–æ –≤–∑—è–ª)

# –ú–µ—Ç–æ–¥—ã:
# borrow(reader) ‚Äî –≤—ã–¥–∞—Ç—å –∫–Ω–∏–≥—É —á–∏—Ç–∞—Ç–µ–ª—é
# return_book() ‚Äî –≤–µ—Ä–Ω—É—Ç—å –∫–Ω–∏–≥—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
# info() ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ

class Book:
    def __init__(self, title: str, author: str, isbn: int, isBorrowed: bool):
        self.title = title
        self.author = author
        self.isbn = isbn
        self.isBorrowed = isBorrowed
        self.borrower: Reader = None

    def borrow(self, reader: Reader) -> None:
        '''–í—ã–¥–∞–µ—Ç –∫–Ω–∏–≥—É —á–∏—Ç–∞—Ç–µ–ª—é'''

        self.isBorrowed = True
        self.borrower = reader
        print(f'–ö–Ω–∏–≥–∞ –≤—ã–¥–∞–Ω–∞ —á–∏—Ç–∞—Ç–µ–ª—é: {self.borrower.readerId}')

    def returnBook(self) -> None:
        '''–í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–∏–≥—É'''

        self.isBorrowed = False
        self.borrower = None
        print(f'–ö–Ω–∏–≥—É –≤–µ—Ä–Ω—É–ª–∏')

    def info(self) -> None:
        '''–ü–æ–∫–∞–∑—ã–≤–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ'''

        info = f'–ö–Ω–∏–≥–∞: {self.title}, –∞–≤—Ç–æ—Ä: {self.author}, id: {self.isbn}'

        if self.isBorrowed:
            info += f'–í—ã–¥–∞–Ω–∞ —á–∏—Ç–∞—Ç–µ–ª—é: {self.borrower.readerId}'
        else:
            info += '–î–æ—Å—Ç—É–ø–Ω–∞'


class Reader:
    def __init__(self, name: str, readerId: int, borrowedBooks: list[Book], maxBooks: int):
        self.name = name
        self.readerId = readerId
        self.borrowedBooks = borrowedBooks
        self.maxBooks = maxBooks

    def canBorrow(self):
        '''–ü—Ä–æ–≤–µ—Ä–∫–∞, –º–æ–∂–Ω–æ –ª–∏ –≤–∑—è—Ç—å –µ—â—ë –∫–Ω–∏–≥–∏'''

        if len(self.borrowedBooks) >= self.maxBooks:
            print('–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –≤–∑—è—Ç—ã—Ö –∫–Ω–∏–≥')
        else:
            print(f'–ú–æ–∂–Ω–æ –≤–∑—è—Ç—å –∫–Ω–∏–≥: {self.maxBooks - len(self.borrowedBooks)}')

    def addBook(self, book: Book):
        '''–î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–∏–≥—É –≤ —Å–ø–∏—Å–æ–∫ –≤–∑—è—Ç—ã—Ö'''

        if len(self.borrowedBooks) < self.maxBooks:
            self.borrowedBooks.append(book)
            print(f'–í–∑—è—Ç–∞ –∫–Ω–∏–≥–∞: {book.isbn}')
        else:
            print('–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –≤–∑—è—Ç—ã—Ö –∫–Ω–∏–≥')

    def removeBook(self, book: Book):
        '''–£–¥–∞–ª—è–µ—Ç –∫–Ω–∏–≥—É –∏–∑ —Å–ø–∏—Å–∫–∞'''
        if book in self.borrowedBooks:
            self.borrowedBooks.remove(book)
            print(f'–ö–Ω–∏–≥–∞ "{book.isbn}" —É–±—Ä–∞–Ω–∞')
        else:
            print('–¢–∞–∫–æ–π –∫–Ω–∏–≥–∏ –Ω–µ—Ç')

    def showBooks(self):
        '''–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∑—è—Ç—ã–µ –∫–Ω–∏–≥–∏'''
        for book in self.borrowedBooks:
            print(f'–ö–Ω–∏–≥–∞: {book.title}, –∞–≤—Ç–æ—Ä: {book.author}, id: {book.isbn}')


#~ –ö–ª–∞—Å—Å Reader:
# –ê—Ç—Ä–∏–±—É—Ç—ã: name, reader_id, borrowed_books (—Å–ø–∏—Å–æ–∫ –≤–∑—è—Ç—ã—Ö –∫–Ω–∏–≥), max_books (–ª–∏–º–∏—Ç –∫–Ω–∏–≥)

# –ú–µ—Ç–æ–¥—ã:
# can_borrow() ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–µ—Ç –ª–∏ –≤–∑—è—Ç—å –µ—â—ë –∫–Ω–∏–≥–∏
# add_book(book) ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–∏–≥—É –≤ —Å–ø–∏—Å–æ–∫ –≤–∑—è—Ç—ã—Ö
# remove_book(book) ‚Äî —É–¥–∞–ª—è–µ—Ç –∫–Ω–∏–≥—É –∏–∑ —Å–ø–∏—Å–∫–∞
# show_books() ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∑—è—Ç—ã–µ –∫–Ω–∏–≥–∏

#~ –ö–ª–∞—Å—Å Library:
# –ê—Ç—Ä–∏–±—É—Ç—ã: books (—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥), readers (—Å–ø–∏—Å–æ–∫ —á–∏—Ç–∞—Ç–µ–ª–µ–π)

# –ú–µ—Ç–æ–¥—ã:
# add_book(book) ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–∏–≥—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
# register_reader(reader) ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —á–∏—Ç–∞—Ç–µ–ª—è
# lend_book(isbn, reader_id) ‚Äî –≤—ã–¥–∞—ë—Ç –∫–Ω–∏–≥—É —á–∏—Ç–∞—Ç–µ–ª—é –ø–æ ISBN –∏ ID
# return_book(isbn) ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–Ω–∏–≥—É –æ–±—Ä–∞—Ç–Ω–æ
# find_book_by_title(title) ‚Äî –∏—â–µ—Ç –∫–Ω–∏–≥—É –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
# find_reader_by_id(reader_id) ‚Äî –∏—â–µ—Ç —á–∏—Ç–∞—Ç–µ–ª—è –ø–æ ID
# show_available_books() ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–∏–≥–∏
# show_borrowed_books() ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∑—è—Ç—ã–µ –∫–Ω–∏–≥–∏

class Library:
    def __init__(self, books: list[Book], readers: list[Reader]):
        self.books = books
        self.readers = readers

    def addBook(self, book: Book):
        '''–î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–∏–≥—É –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É'''
        self.books.append(book)
        print(f'–ö–Ω–∏–≥–∞ "{book.isbn}" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É')

    def registerReader(self, reader: Reader):
        '''–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —á–∏—Ç–∞—Ç–µ–ª—è'''
        self.readers.append(reader)
        print(f'–ß–∏—Ç–∞—Ç–µ–ª—å "{reader.readerId}" –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω')

    def lendBook(self, isbn: int, readerId: int):
        for book in self.books: # –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–Ω–∏–≥–∏
            if book.isbn == isbn: # –Ω–∞—Ö–æ–¥–∏–º –Ω—É–∂–Ω—É—é –Ω–∞–º 
                for reader in self.readers: # –µ—Å–ª–∏ –Ω–∞—à–ª–∏ –∫–Ω–∏–≥—É, –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º —á–∏—Ç–∞—Ç–µ–ª–µ–π 
                    if reader.readerId == readerId: # —Ç–∞–∫–∂–µ –Ω–∞—Ö–æ–¥–∏–º –Ω—É–∂–Ω–æ–≥–æ –Ω–∞–º
                        book.borrow(reader)
                        reader.addBook(book)

    def returnBook(self, isbn: int):
        for book in self.books:
            if book.isbn == isbn and book.isBorrowed == True:
                book.returnBook()
                print('–ö–Ω–∏–≥—É –≤–µ—Ä–Ω—É–ª–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É')
            elif book.isbn == isbn and book.isBorrowed == False:
                print('–ö–Ω–∏–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ')

    def findBookByTitle(self, title: str):
        for book in self.books:
            if book.title == title:
                print(f'–ö–Ω–∏–≥–∞: {book.title}, –∞–≤—Ç–æ—Ä: {book.author}, id: {book.isbn}')
                break

    def findReaderById(self, readerId: int):
        for reader in self.readers:
            if reader.readerId == readerId:
                print(f'–ò–º—è: {reader.name}, id: {reader.readerId}, –º–æ–∂–µ—Ç –±—Ä–∞—Ç—å –∫–Ω–∏–≥: {reader.maxBooks}')
                break

    def showAvailableBooks(self):
        availableList = '–°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–Ω–∏–≥: \n'
        for i, book in enumerate(self.books):
            if book.isBorrowed == False:
                result += f'{i + 1}. {book.title}, id: {book.isbn} \n'
        
        print(availableList)
        
    def showBorrowedBooks(self):
        pass










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    










































































































































































































































    